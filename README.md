## ğŸ’¾ ê³„ì‚°ê¸° í”„ë¡œì íŠ¸

- í”„ë¡œì íŠ¸ ê¸°ê°„: [3ì£¼] 2021-11-08(ì›”) ~ 2021-11-26(ê¸ˆ)

- Contributor: ì˜ˆê±°(@Jager-yoo)

- Reviewer: í°(@daheenallwhite)

<br>

## ğŸ“± ê¸°ëŠ¥ ì‹œì—°

- ê¸°ë³¸ ìƒíƒœ (ìˆ«ì 0 ë§Œ ì¡´ì¬í•˜ëŠ” ìƒíƒœ) ì—ì„œëŠ” `[0] ë²„íŠ¼`ì´ë‚˜ `[00] ë²„íŠ¼`ì„ ëˆŒëŸ¬ë„ ìˆ«ìê°€ ì¶”ê°€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

- ê¸°ë³¸ ìƒíƒœì—ì„œëŠ” `[ì—°ì‚°ì] ë²„íŠ¼`ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì…ë ¥ì°½ì— `ì†Œìˆ˜ì (Decimal Point)`ì´ ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´, `[.] ë²„íŠ¼`ì„ ëˆŒëŸ¬ë„ ì†Œìˆ˜ì ì´ ë‹¤ì‹œ ì°íˆì§€ ì•ŠìŠµë‹ˆë‹¤.

- ë¶ˆí•„ìš”í•œ ì†Œìˆ˜ëŠ” ìë™ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤. (ex. 25.000 -> 25 / 100.25 -> 100)

- `[=] ë²„íŠ¼`ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ” ê²°ê³¼ê°’ì—ëŠ” `ì²œë‹¨ìœ„ ì½¤ë§ˆ(,)`ê°€ ì ìš©ë©ë‹ˆë‹¤.

- ìˆ«ì 0 ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²½ìš°, `NaN`ì´ ì¶œë ¥ë˜ê³ , NaN ì—ëŠ” ì–´ë–¤ ì—°ì‚°ì„ ì ìš©í•´ë„ ë‹¤ì‹œ NaN ì´ ì¶œë ¥ë©ë‹ˆë‹¤.

- ëˆ„ì ëœ ì—°ì‚°ì´ í™”ë©´ ê¸¸ì´ë¥¼ ë„˜ì–´ê°€ë©´, ìƒˆë¡œìš´ ì—°ì‚°ì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ `í™”ë©´ì´ ìŠ¤í¬ë¡¤ì˜ ìµœí•˜ë‹¨ìœ¼ë¡œ ì´ë™`í•©ë‹ˆë‹¤.
ë™ì‹œì— `ìŠ¤í¬ë¡¤ ì¸ë””ì¼€ì´í„°`ê°€ ë°˜ì§ì´ë©° ì‚¬ìš©ìì—ê²Œ ìŠ¤í¬ë¡¤ì˜ ì¡´ì¬ë¥¼ ì•Œë¦½ë‹ˆë‹¤.

- ì‚¬ìš©ìëŠ” í„°ì¹˜ë¡œ `ìŠ¤í¬ë¡¤` ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ëˆ„ì ëœ ì—°ì‚° ê¸°ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `[CE] ë²„íŠ¼`ì„ ëˆ„ë¥´ë©´ ì…ë ¥ì°½ì˜ ìˆ«ìê°€ 0 ìœ¼ë¡œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.

- `[AC] ë²„íŠ¼`ì„ ëˆ„ë¥´ë©´ ì…ë ¥ì°½ ìˆ«ì ë¿ë§Œ ì•„ë‹ˆë¼, ëˆ„ì ëœ ëª¨ë“  ì—°ì‚°ê³¼ StackView ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.

- ëª¨ë“  ë²„íŠ¼ì—ëŠ” [Selection í–…í‹± í”¼ë“œë°±](https://developer.apple.com/documentation/uikit/uiselectionfeedbackgenerator)ì„ ì ìš©í•˜ì—¬, ì‚¬ìš©ìì˜ ë²„íŠ¼ í„°ì¹˜ ê²½í—˜ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.

https://user-images.githubusercontent.com/71127966/143849158-e35a7fb0-395b-4ce5-863f-7fc73358be99.mp4

<br>

## ğŸ“ UML

![image](https://user-images.githubusercontent.com/71127966/143765070-8d787531-afd3-445c-9ab8-38d29577908f.png)

- <ê³„ì‚°ê¸°> í”„ë¡œì íŠ¸ì˜ ìš”êµ¬ì‚¬í•­ì—ì„œ ì œì‹œëœ ì „ì²´ `UML`ì„ ì¤€ìˆ˜í•˜ë©° ê°œë°œí–ˆìœ¼ë©°, ì¶”ê°€ëœ ë‚´ìš©ì€ `í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨`ì— ì¶”ê°€í•´ì„œ ì§ì ‘ ê·¸ë ¸ìŠµë‹ˆë‹¤.

- CalculateItemQueue êµ¬ì¡°ì²´ì˜ `ì œë„¤ë¦­`ì´ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ê³  ìˆì§€ë§Œ, ì´ëŠ” ì™¸ë¶€ì—ì„œ ì£¼ì…ë˜ëŠ” ìš”ì†Œì´ê¸° ë•Œë¬¸ì—, UML ì—ì„œ `ì‹¤ì²´í™” ê´€ê³„`(Realization)ë¡œ ì—°ê²°í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

- ë°˜ë©´ Operator ì™€ Double íƒ€ì…ì€ CalculateItem í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ê³  ìˆìœ¼ë¯€ë¡œ `ì‹¤ì²´í™” ê´€ê³„`ë¡œ ì—°ê²°í–ˆìŠµë‹ˆë‹¤.

- Formula êµ¬ì¡°ì²´ì˜ í”„ë¡œí¼í‹°ëŠ” CalculateItemQueue íƒ€ì…ì„ ì°¸ì¡°í•˜ë¯€ë¡œ `ì§ì ‘ ì—°ê´€ ê´€ê³„`(Directed Association)ë¡œ ì—°ê²°í–ˆìŠµë‹ˆë‹¤.

- ExpressionParser ì—´ê±°í˜•ì˜ `parse` ë©”ì„œë“œê°€ Formula íƒ€ì…ì„ ìƒì„±í•˜ê³  ë¦¬í„´í•˜ê¸° ë•Œë¬¸ì—, Formula êµ¬ì¡°ì²´ì™€ `ì˜ì¡´ ê´€ê³„`(Dependency)ë¡œ ì—°ê²°í–ˆìŠµë‹ˆë‹¤.
parse ë©”ì„œë“œì˜ í˜¸ì¶œì´ ëë‚˜ë©´ Formula êµ¬ì¡°ì²´ì™€ì˜ ê´€ê³„ê°€ ë§ˆë¬´ë¦¬ë©ë‹ˆë‹¤.

- private, private(set) ì ‘ê·¼ì œì–´ê°€ ë¶™ì€ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œì—ëŠ” `-` ê¸°í˜¸ë¥¼ ë¶™ì˜€ìŠµë‹ˆë‹¤. internal ì ‘ê·¼ì œì–´ëŠ” ì•„ë¬´ ê¸°í˜¸ë„ ë¶™ì´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

- íƒ€ì… í”„ë¡œí¼í‹°/ë©”ì„œë“œ(static)ì—ëŠ” `ë°‘ì¤„(underline)`ì´ ë“¤ì–´ê°„ë‹¤ëŠ” ê±¸ [UML Class Diagrams Reference](https://www.uml-diagrams.org/class-reference.html) ì—ì„œ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ExpressionParser ì—´ê±°í˜•ì˜ ë‘ ë©”ì„œë“œì—ëŠ” ë°‘ì¤„ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.

- ìš”êµ¬ì‚¬í•­ì„ ì‚´í´ë³´ë‹¤ê°€, CalculateItem í”„ë¡œí† ì½œê³¼ Double extension ì˜ í´ë˜ìŠ¤ ìƒì ì œëª© ë¶€ë¶„ì´ _**ì´íƒ¤ë¦­ì²´(italic)**_ ë¡œ ë˜ì–´ìˆëŠ” ê±¸ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.
[UML Class Diagrams Reference](https://www.uml-diagrams.org/class-reference.html) ì„ ê²€ìƒ‰í•´ë³´ë‹ˆ, `ì¶”ìƒí™” í´ë˜ìŠ¤`ì˜ ì œëª©ì€ _ì´íƒ¤ë¦­ì²´_ ë¡œ í‘œê¸°í•œë‹¤ëŠ” ë‚´ìš©ì´ ìˆë”ë¼êµ¬ìš”.
ìœ„ UML ì—ì„œ, CalculateItem í”„ë¡œí† ì½œê³¼ Double extension ì€ ë‘˜ ë‹¤ ë¹„ì–´ìˆê³  ì¶”ìƒí™”ë¥¼ ìœ„í•´ì„œë§Œ ì‚¬ìš©ë˜ë¯€ë¡œ, _ì´íƒ¤ë¦­ì²´_ ë¡œ í‘œê¸°í–ˆìŠµë‹ˆë‹¤.
  - > [Abstract Class] The name of an abstract class is shown in italics.

<br>

## ğŸ›  ì¤‘ìš” êµ¬í˜„ ë‚´ìš©

### âœ… ìì£¼ í˜¸ì¶œë˜ëŠ” ìƒìˆ˜ë¥¼ ê¸°ë³¸ íƒ€ì…ì˜ extension ì˜ íƒ€ì… í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸

- ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìœ„í•œ ì—´ê±°í˜•ì„ ë”°ë¡œ ë§Œë“¤ì§€ ì•Šê³ , ê¸°ë³¸ íƒ€ì…ì˜ `extension`ì„ í™œìš©í•´ í˜¸ì¶œ ì‹œ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

- ViewController ë¿ë§Œ ì•„ë‹ˆë¼, ëª¨ë“  íŒŒì¼ì—ì„œ `í•˜ë“œì½”ë”©`ì„ ë‹¨ í•œ ë²ˆë„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

```swift
extension Character {
    static let whiteSpace: Character = " "
}

extension String {
    static let empty: String = ""
    static let zero: String = "0"
    static let decimalPoint: String = "."
    static let decimalComma: String = ","
    static let negativeSign: String = "-"
}
```

<br>

### âœ… ViewController ì„¸íŒ…ì— í•„ìš”í•œ ë©”ì„œë“œëŠ” ë³„ë„ ì—´ê±°í˜•ì˜ íƒ€ì… ë©”ì„œë“œë¡œ ë¶„ë¦¬

- `NumberFormatter ì„¸íŒ…`, `Label Attributes ì„¸íŒ…`, `ìŠ¤í¬ë¡¤ í•˜ë‹¨ ì´ë™ ë©”ì„œë“œ`, `í–…í‹± í”¼ë“œë°± ë©”ì„œë“œ` ì™€ ê°™ì´ êµ³ì´ ViewController ì— ìœ„ì¹˜í•  í•„ìš”ê°€ ì—†ëŠ” ë©”ì„œë“œë¥¼ ë³„ë„ì˜ ì—´ê±°í˜• íŒŒì¼ë¡œ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤.

```swift
enum CalculatorSetting {
    static func formatNumber(_ input: Double) -> String {
        let numberFormatter = NumberFormatter()
        numberFormatter.numberStyle = .decimal
        numberFormatter.maximumIntegerDigits = 20
        numberFormatter.maximumFractionDigits = 20
        numberFormatter.roundingMode = .halfUp
        return numberFormatter.string(for: input) ?? String.empty
    }
    ...
}
```

<br>

### âœ… ë¹„ìŠ·í•œ ê¸°ëŠ¥ì˜ ë²„íŠ¼ì€ í•˜ë‚˜ì˜ @IBAction ë©”ì„œë“œì— ì—°ê²°

- ëŒ€í‘œì ìœ¼ë¡œ, ê³„ì‚°ê¸°ì˜ `[1 ~ 9] ìˆ«ì ë²„íŠ¼`ì„ í•˜ë‚˜ì˜ IBAction ë©”ì„œë“œì— ì—°ê²°í•˜ê³  íŒŒë¼ë¯¸í„°ë¡œ ë“¤ì–´ì˜¤ëŠ” `UIButton` íƒ€ì…ì˜ `currentTitle í”„ë¡œí¼í‹°`ë¥¼ í™œìš©í•´ì„œ ì–´ë–¤ ìˆ«ì ë²„íŠ¼ì´ ëˆŒë ¤ë„ ëŒ€ì‘ì´ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<p align="center"><img src="https://user-images.githubusercontent.com/71127966/143768821-7731fa0b-af8a-48e0-b9cd-4e583e24d82f.png" width="60%"></p>

```swift
@IBAction func tappedOperandButton(_ button: UIButton) {
    guard var operandLabelText = operandLabel.text,
          let buttonTitle = button.currentTitle else { return }
        
    if operandLabelText == String.zero {
        operandLabelText = String.empty
    }
        
    operandLabel.text = "\(operandLabelText)\(buttonTitle)"
}
```

<br>

### âœ… Scroll Indicator ì˜ ê°€ì‹œì„±ì„ ë†’ì´ê³  ìˆ«ìë¥¼ ê°€ë¦¬ì§€ ì•Šë„ë¡ attributes ë³€ê²½

- ìŠ¤í† ë¦¬ë³´ë“œì—ì„œ ScrollView ì˜ `indicatorStyle` ì„ `white`ë¡œ ë³€ê²½í•˜ì—¬ ì–´ë‘ìš´ ë°°ê²½ì—ì„œ ëˆˆì— ë” ì˜ ë„ëŠ” í°ìƒ‰ìœ¼ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

- ìŠ¤í† ë¦¬ë³´ë“œì—ì„œ `scrollIndicatorInsets` í”„ë¡œí¼í‹°ì— Right 350pt ë¶€ì—¬í•´ì„œ Scroll Indicator ê°€ ìˆ«ìë¥¼ ê°€ë¦¬ì§€ ì•Šë„ë¡ í™”ë©´ì˜ ì™¼ìª½ìœ¼ë¡œ ì´ë™ì‹œì¼°ìŠµë‹ˆë‹¤.

<p align="center"><img width="60%" alt="Scroll Indicator á„ƒá…¥ á„Œá…¡á†¯ á„‡á…©á„‹á…µá„€á…¦ ë³€ê²½" src="https://user-images.githubusercontent.com/71127966/143805516-4204c52e-89f4-42e0-ba3f-bf1b6a310ea4.png"></p>

<br>

### âœ… ë‚˜ëˆ—ì…ˆ ë©”ì„œë“œì—ì„œ ìˆ«ì 0 ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²½ìš°, ì—ëŸ¬ë¥¼ ë˜ì§€ê¸° ë³´ë‹¤ëŠ” Double.nan ì„ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„

- 0 ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²½ìš°, ì—ëŸ¬ë¥¼ ë˜ì§€ê¸° ë³´ë‹¤ëŠ” ê°„ë‹¨í•˜ê²Œ `Double.nan`ì´ ë°˜í™˜ë˜ë„ë¡ ë§Œë“¤ì–´ì„œ ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

- ìˆ«ì 0 ì„ í‘œí˜„í•  ë•Œ, í•˜ë“œì½”ë”©ì„ í”¼í•˜ê¸° ìœ„í•´ `Double.zero`ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

- Double.nan ì„ String íƒ€ì…ìœ¼ë¡œ ì¶œë ¥í•˜ë©´ "nan" ì´ ë‚˜ì˜¤ì§€ë§Œ, `numberFormatter` ë¥¼ í†µí•´ numberStyle í”„ë¡œí¼í‹°ë¥¼ `decimal`ë¡œ ì„¤ì •í•˜ë©´ String íƒ€ì…ìœ¼ë¡œ ì¶œë ¥ ì‹œ, `"NaN"` ìœ¼ë¡œ ë‚˜ì˜µë‹ˆë‹¤.

```swift
private func divide(_ lhs: Double, _ rhs: Double) -> Double {
    switch rhs {
    case .zero:
        return Double.nan
    default:
        return lhs / rhs
    }
}
```

<br>

### âœ… ë¹ˆ í”„ë¡œí† ì½œê³¼ ì œë„¤ë¦­ íƒ€ì…ì„ í™œìš©í•˜ì—¬, íŠ¹ì • íƒ€ì…ë§Œ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆë„ë¡ êµ¬í˜„

```swift
// ë¹ˆ í”„ë¡œí† ì½œ CalculateItem ì„ ì–¸
protocol CalculateItem {}

// Double íƒ€ì…ì˜ extension ë§Œë“¤ì–´ì„œ í”„ë¡œí† ì½œ ì¤€ìˆ˜ì‹œí‚´
extension Double: CalculateItem {}

// Operator ì—´ê±°í˜• í”„ë¡œí† ì½œ ì¤€ìˆ˜ì‹œí‚´
enum Operator: CalculateItem {
    case ...
}

// 'ì œë„¤ë¦­'ì´ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ê²Œ ë§Œë“¤ì–´ì„œ, Double íƒ€ì…ê³¼ Operator íƒ€ì…ë§Œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆë„ë¡ êµ¬í˜„
struct CalculatorItemQueue<Element: CalculateItem> {
    private(set) var queue: [Element] = []
    ...
}
```
